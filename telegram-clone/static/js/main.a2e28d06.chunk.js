(this["webpackJsonpreact-player"]=this["webpackJsonpreact-player"]||[]).push([[0],{59:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var s=a(7),c=a.n(s),i=a(36),n=a.n(i),r=a(16),l=a(50),o=a(27),u=Object(o.b)({name:"auth",initialState:{isAuthenticated:!1,user:null},reducers:{login:function(e,t){var a=t.payload,s=a.uid,c=a.displayName,i=a.photoURL;e.isAuthenticated=!0,e.user={uid:s,displayName:c,photoURL:i}},logout:function(e,t){t.payload;e.isAuthenticated=!1,e.user=null}}}),d=u.actions,h=function(e){return e.auth.isAuthenticated},b=function(e){return e.auth.user},j=u.reducer,m=Object(o.b)({name:"chats",initialState:{list:[],selectedChatId:null,isLoading:!1},reducers:{setChats:function(e,t){var a=t.payload.list;e.list=a},setSelectedChatId:function(e,t){var a=t.payload.to;e.selectedChatId=a},setIsLoading:function(e,t){var a=t.payload.to;e.isLoading=a}}}),f=m.actions,p=function(e,t){return e.chats.list.find((function(e){return e.id===t}))},g=function(e){return e.chats.selectedChatId},O=function(e,t){return e.chats.list.filter((function(e){return e.name.includes(t)}))},_=function(e){return e.chats.isLoading},x=m.reducer,v=Object(o.b)({name:"common",initialState:{searchMessageInputValue:"",searchChatInputValue:""},reducers:{setSearchMessageInputValue:function(e,t){var a=t.payload.to;e.searchMessageInputValue=a},setSearchChatInputValue:function(e,t){var a=t.payload.to;e.searchChatInputValue=a}}}),y=v.actions,N=function(e){return e.common.searchMessageInputValue},C=function(e){return e.common.searchChatInputValue},w=v.reducer,V=Object(o.b)({name:"messages",initialState:{list:[],isLoading:!1},reducers:{setMessages:function(e,t){var a=t.payload.list;e.list=a},setIsLoading:function(e,t){var a=t.payload;e.isLoading=a.to}}}),S=V.actions,I=function(e){return e.messages.list},L=function(e){return e.messages.isLoading},M=V.reducer,R=Object(o.b)({name:"ui",initialState:{createChatWindowVisibility:!1,sidebarVisibility:!1,searchMessagePanelVisibility:!1},reducers:{toggleCreateChatWindowVisibility:function(e,t){t.payload;e.createChatWindowVisibility=!e.createChatWindowVisibility},toggleSidebarVisibility:function(e,t){t.payload;e.sidebarVisibility=!e.sidebarVisibility},toggleSearchMessagePanelVisibility:function(e,t){t.payload;e.searchMessagePanelVisibility=!e.searchMessagePanelVisibility},setSearchMessagePanelVisibility:function(e,t){var a=t.payload;e.searchMessagePanelVisibility=a.to},setSidebarVisibility:function(e,t){var a=t.payload;e.sidebarVisibility=a.to}}}),k=R.actions,E=function(e){return e.ui.createChatWindowVisibility},U=function(e){return e.ui.sidebarVisibility},P=function(e){return e.ui.searchMessagePanelVisibility},D=R.reducer,A=Object(o.a)({reducer:{auth:j,ui:D,common:w,chats:x,messages:M}}),W=a(0),T=a.n(W),F=a(2),B=(a(59),a(29)),H=a(14),z=a(11),G=a(5),J=function(e){return Object(G.jsx)("div",{className:"shade ".concat(!e.visibility&&"shade--hidden"),onClick:e.onClick})},K=a.p+"static/media/01.4f438702.svg",X=a.p+"static/media/02.dd463982.svg",q=a.p+"static/media/03.3990d193.svg",Q=a.p+"static/media/04.499762bc.svg",Y=a.p+"static/media/05.30f23d98.svg",Z=a.p+"static/media/06.6615d830.svg",$=a.p+"static/media/07.08c6b511.svg",ee=a.p+"static/media/08.4f495ff6.svg",te=a(12),ae=a(46),se=a(47),ce=a(48),ie=a(44),ne=(Object(ae.a)({apiKey:"AIzaSyDgxSLLfr3A5sLBaWXb1sGuLcW6D__Ht4g",authDomain:"whatsappclone-6dfe6.firebaseapp.com",projectId:"whatsappclone-6dfe6",storageBucket:"whatsappclone-6dfe6.appspot.com",messagingSenderId:"504293413239",appId:"1:504293413239:web:80c0a613af0cdfe6401172"}),Object(se.a)()),re=Object(ie.b)(),le=Object(ce.a)(),oe=new ie.a,ue={toggleCreateChatWindowVisibility:k.toggleCreateChatWindowVisibility,setSelectedChatId:f.setSelectedChatId},de=Object(r.b)((function(e){return{visibility:E(e)}}),ue)((function(e){var t=Object(s.useState)(""),a=Object(z.a)(t,2),c=a[0],i=a[1],n=Object(s.useState)(K),r=Object(z.a)(n,2),l=r[0],o=r[1],u=Object(s.useState)(!1),d=Object(z.a)(u,2),h=d[0],b=d[1],j=Object(s.useRef)(null),m=[K,X,q,Q,Y,Z,$,ee];Object(s.useEffect)((function(){e.visibility}),[e.visibility]);var f=function(){var e=Object(F.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:c,photoURL:l,onlineList:[],lastMessage:null},e.next=3,Object(te.a)(Object(te.d)(ne,"chats"),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){i(""),o(K),b(!1)},g=function(){e.toggleCreateChatWindowVisibility()};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"create-chat-window ".concat(!e.visibility&&"create-chat-window--hidden"),children:[Object(G.jsx)("h2",{className:"create-chat-window__title h4",children:"Create Chat"}),Object(G.jsxs)("form",{className:"create-chat-window__form",onSubmit:function(t){t.preventDefault(),c.trim()?(f().then((function(t){return a=t.id,void e.setSelectedChatId({to:a});var a})),p(),g()):b(!0)},children:[Object(G.jsx)("input",{className:"create-chat-window__chat-name-input ".concat(h&&"create-chat-window__chat-name-input--error"),value:c,onChange:function(e){return i(e.target.value)},placeholder:"Type chat name",ref:j}),Object(G.jsx)("ul",{className:"create-chat-window__photos-list",children:m.map((function(e,t){return Object(G.jsxs)("li",{className:"create-chat-window__photos-item",onClick:function(t){o(e)},children:[Object(G.jsx)("img",{src:e,className:"create-chat-window__photo ".concat(l===e&&"_create-chat-window__photo--selected")}),Object(G.jsx)("div",{className:"create-chat-window__selected-label ".concat(!(l===e)&&"create-chat-window__selected-label--hidden")})]},t)}))}),Object(G.jsx)("button",{type:"submit",className:"create-chat-window__submit-btn",children:"Create"})]})]}),Object(G.jsx)(J,{visibility:e.visibility,onClick:function(){p(),g()}})]})})),he=function(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){t.current=e})),t.current},be={setSearchMessageInputValue:y.setSearchMessageInputValue,toggleSearchMessagePanelVisibility:k.toggleSearchMessagePanelVisibility,setSearchMessagePanelVisibility:k.setSearchMessagePanelVisibility,setSidebarVisibility:k.setSidebarVisibility},je=Object(r.b)((function(e){return{selectedChat:p(e,g(e)),searchMessageInputValue:N(e),searchMessagePanelVisibility:P(e)}}),be)((function(e){var t=Object(s.useRef)(null),a=Object(s.useRef)((function(a){a.target.contains(t.current)||(console.log("test"),e.setSearchMessagePanelVisibility({to:!1}),i())}));Object(s.useEffect)((function(){var a;e.searchMessagePanelVisibility&&(null===(a=t.current)||void 0===a||a.focus())}),[e.searchMessagePanelVisibility]);var c=function(){var t=Object(F.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.e)(Object(te.f)(ne,"/chats",e.selectedChat.id));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){document.removeEventListener("click",a.current)};return Object(G.jsxs)("div",{className:"chat-header",children:[Object(G.jsx)("div",{className:"chat-header__search-panel ".concat(!e.searchMessagePanelVisibility&&"chat-header__search-panel--hidden"),children:Object(G.jsx)("input",{placeholder:"Search message",className:"chat-header__search-input",value:e.searchMessageInputValue,onChange:function(t){return e.setSearchMessageInputValue({to:t.target.value})},ref:t})}),Object(G.jsxs)("div",{className:"chat-header__left",children:[Object(G.jsx)("button",{className:"chat-header__btn chat-header__burger-menu-btn",onClick:function(){e.setSidebarVisibility({to:!0})},children:Object(G.jsx)("span",{className:"chat-header__icon chat-header__burger-icon material-icons",children:"menu"})}),Object(G.jsx)("img",{src:e.selectedChat.photoURL,className:"chat-header__photo"}),Object(G.jsx)("span",{className:"chat-header__chat-name",children:e.selectedChat.name}),Object(G.jsxs)("div",{className:"chat-header__online-panel",children:[Object(G.jsx)("span",{className:"chat-header__online-label",children:"Online:"}),Object(G.jsx)("ul",{className:"chat-header__online-list",children:e.selectedChat.onlineList.map((function(t,a){return Object(G.jsxs)("li",{className:"chat-header__online-item",children:[t,(s=a,e.selectedChat.onlineList.length!==s+1?",":null)]},a);var s}))})]})]}),Object(G.jsxs)("div",{className:"chat-header__right",children:[Object(G.jsx)("button",{className:"chat-header__btn chat-header__search-btn",type:"button",onClick:function(){e.setSearchMessagePanelVisibility({to:!e.searchMessagePanelVisibility})},children:Object(G.jsx)("span",{className:"chat-header__search-icon chat-header__icon material-icons-outlined",children:"search"})}),Object(G.jsx)("button",{className:"chat-header__btn chat-header__delete-btn",type:"button",title:"Detete chat",onClick:function(){c()},children:Object(G.jsx)("span",{className:"chat-header__delete-icon chat-header__icon material-icons-outlined",children:"delete"})})]})]})})),me=a(30),fe=Object(r.b)((function(e){return{user:b(e),searchMessageInputValue:N(e)}}),{})((function(e){var t=Object(s.useState)(null),a=Object(z.a)(t,2),c=a[0],i=a[1],n=Object(s.useState)(!0),r=Object(z.a)(n,2),l=r[0],o=r[1];return Object(s.useEffect)((function(){e.photoRef&&Object(me.a)(Object(me.c)(le,e.photoRef)).then((function(e){i(e),o(!1)}))}),[]),Object(G.jsxs)("li",{className:"messages-item\n        ".concat(!e.belongsToCurrentUser&&"messages-item--reversed","\n        ").concat(e.belongsToCurrentUser?"messages-item--align-right":"messages-item--align-left","\n      "),children:[Object(G.jsxs)("div",{className:"messages-item__message\n          ".concat(e.belongsToCurrentUser&&"messages-item__message--green","\n          ").concat(e.searchMessageInputValue.trim()&&e.text.includes(e.searchMessageInputValue)&&"messages-item__message--blue-border","\n        "),children:[Object(G.jsx)("span",{className:"messages-item__message-author",children:e.author.displayName}),Object(G.jsx)("p",{className:"messages-item__message-text",children:e.text}),e.photoRef&&!l&&Object(G.jsx)("img",{src:c,className:"messages-item__message-photo"}),e.photoRef&&l&&Object(G.jsx)("div",{className:"messages-item__loader"}),Object(G.jsx)("span",{className:"messages-item__message-created-date",children:"".concat(new Date(e.timestamp).getHours(),":").concat(new Date(e.timestamp).getMinutes())})]}),Object(G.jsx)("img",{src:e.author.photoURL,className:"messages-item__photo"})]})})),pe=Object(r.b)((function(e){return{}}),{})((function(e){return Object(G.jsxs)("div",{className:"photo-preview ".concat(e.isHidden&&"photo-preview--hidden"),children:[Object(G.jsx)("img",{src:e.photoURL,className:"photo-preview__photo"}),Object(G.jsx)("button",{className:"photo-preview__remove-photo-btn",onClick:e.onDeletePhotoBtnClick,type:"button",children:"Remove"})]})})),ge=Object(r.b)((function(e){return{selectedChatId:g(e),user:b(e)}}),{})((function(e){var t=Object(s.useState)(""),a=Object(z.a)(t,2),c=a[0],i=a[1],n=Object(s.useState)(!0),r=Object(z.a)(n,2),l=r[0],o=r[1],u=Object(s.useState)(null),d=Object(z.a)(u,2),h=d[0],b=d[1],j=Object(s.useState)(!0),m=Object(z.a)(j,2),f=m[0],p=m[1],g=Object(s.useState)(null),O=Object(z.a)(g,2),_=O[0],x=O[1],v=Object(s.useRef)(null),y=Object(s.useRef)(null);Object(s.useEffect)((function(){c.trim()?o(!1):o(!0)}),[c]),Object(s.useEffect)((function(){h?V():w()}),[h]);var N=function(){var t=Object(F.a)(T.a.mark((function t(){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={text:c,author:{displayName:e.user.displayName,uid:e.user.uid,photoURL:e.user.photoURL},createdDate:Object(te.k)(),timestamp:(new Date).getTime(),photoRef:_?"/photos/".concat(_.name):null},t.next=3,Object(te.a)(Object(te.d)(ne,"chats/".concat(e.selectedChatId,"/messages")),a);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(F.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.l)(Object(te.f)(ne,"/chats/".concat(e.selectedChatId)),{lastMessage:{authorDisplayName:e.user.displayName,text:c}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){p(!0)},V=function(){p(!1)};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("form",{className:"send-message-form",onSubmit:function(e){e.preventDefault(),N(),_&&function(){var e=Object(me.c)(le,"/photos/".concat(_.name));Object(me.d)(e,_)}(),C(),b(null),x(null),i(""),v.current.value=null},children:[Object(G.jsx)(pe,{photoURL:h,isHidden:f,onDeletePhotoBtnClick:function(){b(null),v.current.value=null}}),Object(G.jsx)("button",{className:"send-message-form__select-photo-btn",type:"button",onClick:function(){v.current.click()},children:Object(G.jsx)("span",{className:"send-message-form__photo-icon material-icons-outlined ".concat(h&&"send-message-form__photo-icon--file--selected"),children:"photo_size_select_actual"})}),Object(G.jsxs)("div",{className:"send-message-form__message-input-panel",children:[Object(G.jsx)("input",{className:"send-message-form__message-input",value:c,onChange:function(e){return i(e.target.value)},placeholder:"Type message",ref:y}),Object(G.jsx)("button",{type:"submit",className:"send-message-form__submit-btn ".concat(l&&"send-message-form__submit-btn--hidden"),children:Object(G.jsx)("span",{className:"send-message-form__send-icon material-icons",children:"send"})})]})]}),Object(G.jsx)("input",{type:"file",hidden:!0,ref:v,onChange:function(e){!function(e){var t=new FileReader;t.readAsDataURL(e.files[0]),t.onload=function(){b(t.result)}}(e.target),function(){var e;x(null===(e=v.current)||void 0===e?void 0:e.files[0])}()}})]})})),Oe={setIsLoading:S.setIsLoading,setMessages:S.setMessages},_e=Object(r.b)((function(e){return{isLoading:L(e),messages:I(e),selectedChatId:g(e),user:b(e),searchMessageInputValue:N(e)}}),Oe)((function(e){var t=he(e.selectedChatId),a=Object(s.useRef)(null);return Object(s.useEffect)((function(){return e.setIsLoading({to:!0})}),[e.selectedChatId]),Object(s.useEffect)((function(){e.setMessages({list:[]});var t=Object(te.j)(Object(te.d)(ne,"chats/".concat(e.selectedChatId,"/messages")),Object(te.i)("createdDate")),a=Object(te.h)(t,(function(t){var a=[];t.forEach((function(e){var t=e.data(),s={id:e.id,text:t.text,photoRef:t.photoRef,author:{displayName:t.author.displayName,uid:t.author.uid,photoURL:t.author.photoURL},timestamp:t.timestamp};a.push(s)})),e.setMessages({list:a}),e.setIsLoading({to:!1})}));return function(){return a()}}),[e.selectedChatId]),Object(s.useEffect)(Object(F.a)(T.a.mark((function a(){return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(te.l)(Object(te.f)(ne,"/chats/".concat(e.selectedChatId)),{onlineList:Object(te.c)(e.user.displayName)});case 2:if(!t){a.next=5;break}return a.next=5,Object(te.l)(Object(te.f)(ne,"/chats/".concat(t)),{onlineList:Object(te.b)(e.user.displayName)});case 5:case"end":return a.stop()}}),a)}))),[e.selectedChatId]),Object(s.useEffect)((function(){a.current.scrollTo(0,a.current.scrollHeight)}),[e.messages]),Object(G.jsxs)("div",{className:"chat",children:[Object(G.jsx)(je,{}),Object(G.jsxs)("div",{className:"chat__body",ref:a,children:[e.isLoading&&Object(G.jsx)("div",{className:"chat__loader"}),Object(G.jsx)("ul",{className:"chat__messages-list",children:e.messages.map((function(t){return Object(G.jsx)(fe,{text:t.text,photoRef:t.photoRef,author:t.author,belongsToCurrentUser:t.author.uid===e.user.uid,timestamp:t.timestamp},t.id)}))})]}),Object(G.jsx)(ge,{})]})})),xe={toggleSidebarVisibility:k.toggleSidebarVisibility},ve=Object(r.b)((function(e){return{sidebarVisibility:U(e)}}),xe)((function(e){return Object(G.jsxs)("div",{className:"intro",children:[Object(G.jsx)("img",{src:"https://web.telegram.org/z/favicon.svg",className:"intro__logo"}),Object(G.jsx)("h1",{className:"intro__title h4",children:"Welcome to Telegram clone"}),Object(G.jsx)("button",{className:"intro__select-chat-btn",onClick:function(){e.toggleSidebarVisibility()},children:"Select chat"})]})})),ye={setSelectedChatId:f.setSelectedChatId,setSidebarVisibility:k.setSidebarVisibility},Ne=Object(r.b)((function(e){return{}}),ye)((function(e){return Object(G.jsxs)("li",{className:"chats-item ".concat(e.isActive&&"chats-item--selected"),onClick:function(){e.setSelectedChatId({to:e.id}),e.setSidebarVisibility({to:!1})},children:[Object(G.jsx)("img",{src:e.photoURL,className:"chats-item__photo"}),Object(G.jsx)("span",{className:"chats-item__name",children:e.name}),Object(G.jsx)("span",{className:"chats-item__last-message",children:e.lastMessage?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("span",{className:"chats-item__last-message-author",children:[e.lastMessage.authorDisplayName,": "," "]}),Object(G.jsx)("span",{className:"chats-item__last-message-text",children:e.lastMessage.text})]}):"Tap to open"})]})})),Ce={toggleCreateChatWindowVisibility:k.toggleCreateChatWindowVisibility,setIsLoading:f.setIsLoading,setSearchChatInputValue:y.setSearchChatInputValue,setChats:f.setChats,toggleVisibility:k.toggleSidebarVisibility,setSidebarVisibility:k.setSidebarVisibility},we=Object(r.b)((function(e){return{user:b(e),selectedChatId:g(e),isLoading:_(e),filteredChats:O(e,C(e)),searchChatInputValue:C(e),visibility:U(e)}}),Ce)((function(e){var t=Object(s.useRef)(null),a=Object(s.useRef)(null),c=Object(s.useState)(!1),i=Object(z.a)(c,2),n=i[0],r=i[1];Object(s.useEffect)((function(){e.setIsLoading({to:!0})}),[]),Object(s.useEffect)((function(){document.addEventListener("click",(function(e){e.target.contains(a.current)||r(!1)}))}),[]),Object(s.useEffect)((function(){var t=Object(te.j)(Object(te.d)(ne,"chats")),a=Object(te.h)(t,(function(t){var a=[];t.forEach((function(e){var t=e.id,s=e.data(),c=s.name,i=s.lastMessage,n=s.onlineList,r=s.photoURL;a.push({id:t,name:c,lastMessage:i,onlineList:n,photoURL:r})})),e.setChats({list:a}),e.setIsLoading({to:!1})}));return function(){return a()}}),[]);var l=function(){e.setSidebarVisibility({to:!1})};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"sidebar ".concat(!e.visibility&&"sidebar--hidden"),children:[Object(G.jsxs)("div",{className:"sidebar__header",children:[Object(G.jsxs)("div",{className:"sidebar__header-left",children:[Object(G.jsx)("img",{className:"sidebar__header-avatar",src:e.user.photoURL}),Object(G.jsx)("span",{className:"sidebar__header-display-name",children:e.user.displayName}),Object(G.jsx)("span",{className:"sidebar__header-status",children:"Online"})]}),Object(G.jsx)("button",{className:"sidebar__logout-btn",onClick:function(){Object(B.e)(re)},children:Object(G.jsx)("span",{className:"sidebar__logout-icon material-icons-outlined",children:"logout"})})]}),Object(G.jsx)("div",{className:"sidebar__search-panel-wrapper",children:Object(G.jsxs)("div",{className:"sidebar__search-panel ".concat(n&&"sidebar__search-panel--active"),ref:t,children:[Object(G.jsx)("span",{className:"sidebar__search-icon material-icons-outlined",children:"search"}),Object(G.jsx)("input",{ref:a,className:"sidebar__search-input",placeholder:"Search chat",value:e.searchChatInputValue,onChange:function(t){return e.setSearchChatInputValue({to:t.target.value})},onFocus:function(e){r(!0)}})]})}),e.isLoading&&Object(G.jsx)("div",{className:"sidebar__loader"}),Object(G.jsx)("ul",{className:"sidebar__chats-list",children:e.filteredChats.map((function(t){return Object(G.jsx)(Ne,{id:t.id,name:t.name,lastMessage:t.lastMessage,photoURL:t.photoURL,isActive:e.selectedChatId===t.id},t.id)}))}),Object(G.jsx)("button",{className:"sidebar__add-chat-btn",type:"button",onClick:function(){e.toggleCreateChatWindowVisibility(),l()},children:"Add new chat"})]}),Object(G.jsx)(J,{visibility:e.visibility,onClick:function(){l()}})]})})),Ve=Object(r.b)((function(e){return{isAuthenticated:h(e),selectedChat:p(e,g(e))}}),{})((function(e){return e.isAuthenticated?Object(G.jsx)("div",{className:"home-page",children:Object(G.jsxs)("div",{className:"home-page__body",children:[Object(G.jsx)(we,{}),e.selectedChat?Object(G.jsx)(_e,{}):Object(G.jsx)(ve,{})]})}):null})),Se=Object(r.b)((function(e){return{isAuthenticated:h(e)}}),{})((function(e){if(e.isAuthenticated)return null;return Object(G.jsx)("div",{className:"login-page",children:Object(G.jsxs)("div",{className:"login-page__body",children:[Object(G.jsx)("img",{className:"login-page__logo",src:"https://web.telegram.org/z/favicon.svg"}),Object(G.jsx)("h1",{className:"login-page__title h4",children:"Sign in to Telegram"}),Object(G.jsx)("button",{className:"login-page__sign-in-btn",onClick:function(){Object(B.d)(re,oe)},children:"Sign in with Google"})]})})})),Ie={login:d.login,logout:d.logout},Le=Object(r.b)((function(e){return{selectedChatId:g(e),user:b(e)}}),Ie)((function(e){var t=Object(H.g)();return Object(s.useEffect)((function(){Object(B.c)(re,(function(a){if(a){var s=a.uid,c=a.photoURL,i=a.displayName;e.login({uid:s,photoURL:c,displayName:i}),t.push("/home")}else e.logout(),t.push("/login")}))}),[]),Object(s.useEffect)((function(){window.addEventListener("beforeunload",function(){var t=Object(F.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(te.l)(Object(te.f)(ne,"/chats/".concat(e.selectedChatId)),{onlineList:Object(te.b)(e.user.displayName)});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(s.useEffect)((function(){window.addEventListener("error",(function(e){alert("Error")}))}),[]),Object(G.jsxs)("div",{className:"app",children:[Object(G.jsxs)(H.d,{children:[Object(G.jsx)(H.b,{path:"/",exact:!0,children:Object(G.jsx)(H.a,{to:"/home"})}),Object(G.jsx)(H.b,{path:"/login",children:Object(G.jsx)(Se,{})}),Object(G.jsx)(H.b,{path:"/home",children:Object(G.jsx)(Ve,{})})]}),Object(G.jsx)(de,{})]})}));n.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(l.a,{basename:"/telegram-clone",children:Object(G.jsx)(r.a,{store:A,children:Object(G.jsx)(Le,{})})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.a2e28d06.chunk.js.map